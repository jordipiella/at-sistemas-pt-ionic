<app-header [backButton]="true" [title]="movie?.title"></app-header>

<ion-content [fullscreen]="true">
  <ng-container [ngSwitch]="loading">
    <ng-container *ngSwitchCase="true" [ngTemplateOutlet]="skeleton"></ng-container>
    <ng-container *ngSwitchDefault [ngTemplateOutlet]="content"></ng-container>
  </ng-container>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button [disabled]="loading" (click)="deleteMovie(movie?.id)" color="danger" class="mb-3">
      <ion-icon name="trash"></ion-icon>
    </ion-fab-button>
    <ion-fab-button [disabled]="loading" (click)="goToEdit(movie?.id)" color="warning">
      <ion-icon name="create"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>

<ng-template #content>
  <app-movies-detail-view *ngIf="movie" [movie]="movie"></app-movies-detail-view>
</ng-template>


<ng-template #skeleton>
  <div class="bg-white overflow-hidden h-full">
    <div class="h-1/4 bg-gray-100 animate-pulse w-full"></div>
    <div class="px-6 py-3">
      <div class="h-5 bg-gray-100 my-3 rounded w-full animate-pulse"></div>
    </div>
    <div class="px-6 py-3">
      <div class="h-5 bg-gray-100 my-6 rounded animate-pulse w-1/3"></div>
      <div class="h-5 bg-gray-100 my-3 rounded w-full animate-pulse"></div>
      <div class="h-5 bg-gray-100 my-3 rounded animate-pulse w-5/6"></div>
    </div>
  </div>
</ng-template>
